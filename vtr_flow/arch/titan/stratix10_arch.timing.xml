
  <complexblocklist>
  <pb_type name="LAB">
    <input name="data_in" num_pins="80" equivalent="full"/>
    <input name="control_in" num_pins="5" equivalent="none"/>
    <input name="cin" num_pins="1" equivalent="none"/>
    <output name="data_out" num_pins="40" equivalent="full"/>
    <output name="cout" num_pins="1" equivalent="none"/>
    <clock name="clk" num_pins="1"/>
    <mode name="LAB">
      <pb_type name="alm" num_pb="10">
        <input name="data_in" num_pins="8"/>
        <input name="control" num_pins="5"/>
        <input name="cin" num_pins="1"/>
        <output name="data_out" num_pins="4"/>
        <output name="cout" num_pins="1"/>
        <clock name="clock" num_pins="1"/>
        <mode name="alm">
          <pb_type name="comb_block" num_pb="1">
            <input name="lin" num_pins="8"/>
            <input name="cin" num_pins="1"/>
            <output name="combout" num_pins="2"/>
            <output name="sumout" num_pins="2"/>
            <output name="cout" num_pins="1"/>
            <pb_type name="lut" num_pb="2">
              <input name="lin" num_pins="8"/>
              <input name="cin" num_pins="1"/>
              <output name="combout" num_pins="1"/>
              <output name="sumout" num_pins="1"/>
              <output name="cout" num_pins="1"/>
              <mode name="fourteennm_lcell">
                <pb_type blif_model=".subckt stratix10_lcell_comb" name="lcell_comb" num_pb="1">
                  <input name="dataa" num_pins="1"/>
                  <input name="datab" num_pins="1"/>
                  <input name="datac" num_pins="1"/>
                  <input name="datad" num_pins="1"/>
                  <input name="datae" num_pins="1"/>
                  <input name="dataf" num_pins="1"/>
                  <input name="datag" num_pins="1"/>
                  <input name="datah" num_pins="1"/>
                  <input name="cin" num_pins="1"/>
                  <output name="combout" num_pins="1"/>
                  <output name="sumout" num_pins="1"/>
                  <output name="cout" num_pins="1"/>
                </pb_type>
                <interconnect>
                  <!-- LUT inputs -->
                  <direct input="lut.lin[0]" name="in_comp1" output="lcell_comb.dataa"/>
                  <direct input="lut.lin[1]" name="in_comp2" output="lcell_comb.datab"/>
                  <direct input="lut.lin[2]" name="in_comp3" output="lcell_comb.datac"/>
                  <direct input="lut.lin[3]" name="in_comp4" output="lcell_comb.datad"/>
                  <direct input="lut.lin[4]" name="in_comp5" output="lcell_comb.datae"/>
                  <direct input="lut.lin[5]" name="in_comp6" output="lcell_comb.dataf"/>
                  <direct input="lut.lin[6]" name="in_comp7" output="lcell_comb.datag"/>
                  <direct input="lut.lin[7]" name="in_comp8" output="lcell_comb.datah"/>
                  <!-- LUT outputs -->
                  <direct input="lcell_comb.combout" name="out_comp1" output="lut.combout"/>
                  <direct input="lcell_comb.sumout" name="out_comp2" output="lut.sumout"/>
                  <!-- LUT carry chain -->
                  <direct input="lut.cin" name="lut_cin" output="lcell_comb.cin">
                    <pack_pattern name="LAB_carry_chain" in_port="lut.cin" out_port="lcell_comb.cin"/>
                  </direct>
                  <direct input="lcell_comb.cout" name="out_comp3" output="lut.cout">
                    <pack_pattern name="LAB_carry_chain" in_port="lcell_comb.cout" out_port="lut.cout"/>
                  </direct>
                </interconnect>
              </mode>
              <mode name="names_lut">
                <pb_type blif_model=".names" class="lut" name="lut6" num_pb="1">
                  <input name="in" num_pins="6" port_class="lut_in"/>
                  <output name="out" num_pins="1" port_class="lut_out"/>
                </pb_type>


                <interconnect>
                  <complete input="lut.lin" name="l_complete1" output="lut6.in[5:0]"/>
                  <complete input="lut6.out" name="l_complete2" output="lut.sumout lut.combout"/>
                </interconnect>
              </mode>
            </pb_type>
            <interconnect>
              <!-- Inputs to the LUTs -->
              <direct input="comb_block.lin" name="in_lut0" output="lut[0].lin"/>
              <direct input="comb_block.lin" name="in_lut1" output="lut[1].lin"/>
              <!-- Combinational Block Carry Chain -->
              <direct input="comb_block.cin" name="comb_block_cin" output="lut[0].cin">
                <pack_pattern name="LAB_carry_chain" in_port="comb_block.cin" out_port="lut[0].cin"/>
              </direct>
              <direct input="lut[0].cout" name="lut_to_lut_carry" output="lut[1].cin">
                <pack_pattern name="LAB_carry_chain" in_port="lut[0].cout" out_port="lut[1].cin"/>
              </direct>
              <direct input="lut[1].cout" name="alm_cout" output="comb_block.cout">
                <pack_pattern name="LAB_carry_chain" in_port="lut[1].cout" out_port="comb_block.cout"/>
              </direct>
              <!-- Outputs to the Combinational Block -->
              <direct input="lut[0].combout" name="in_lut0" output=" comb_block.combout[0]"/>
              <direct input="lut[1].combout" name="in_lut0" output=" comb_block.combout[1]"/>
              <direct input="lut[0].sumout" name="in_lut0" output=" comb_block.sumout[0]"/>
              <direct input="lut[1].sumout" name="in_lut0" output=" comb_block.sumout[1]"/>
            </interconnect>
          </pb_type>
          <pb_type name="dff" num_pb="4">
            <input name="clrn" num_pins="1"/>
            <input name="sclr" num_pins="1"/>
            <input name="ena" num_pins="1"/>
            <input name="d" num_pins="1"/>
            <output name="q" num_pins="1"/>
            <clock name="clk" num_pins="1"/>
            <mode name="stratix10_ff">
              <pb_type blif_model=".subckt fourteennm_ff" name="fourteennm_ff" num_pb="1">
                <input name="clrn" num_pins="1"/>
                <input name="sclr" num_pins="1"/>
                <input name="ena" num_pins="1"/>
                <input name="d" num_pins="1"/>
                <output name="q" num_pins="1"/>
                <clock name="clk" num_pins="1"/>
              </pb_type>
              <interconnect>
                <direct input="dff.clrn" name="fourteennm_ff_clrn" output="fourteennm_ff.clrn"/>
                <direct input="dff.sclr" name="fourteennm_ff_sclr" output="fourteennm_ff.sclr"/>
                <direct input="dff.ena" name="fourteennm_ff_ena" output="fourteennm_ff.ena"/>
                <direct input="dff.d" name="fourteennm_ff_d" output="fourteennm_ff.d"/>
                <direct input="fourteennm_ff.q" name="fourteennm_ff_q" output="dff.q"/>
                <direct input="dff.clk" name="fourteennm_ff_clk" output="fourteennm_ff.clk"/>
              </interconnect>
            </mode>
            <mode name="latch">
              <pb_type name="ff" blif_model=".latch" num_pb="1" class="flipflop">
                <input name="D" num_pins="1" port_class="D"/>
                <output name="Q" num_pins="1" port_class="Q"/>
                <clock name="clk" num_pins="1" port_class="clock"/>
              </pb_type>
              <interconnect>
                <direct input="dff.d" name="ff_d" output="ff.D"/>
                <direct input="ff.Q" name="ff_q" output="dff.q"/>
                <direct input="dff.clk" name="ff_clk" output="ff.clk"/>
              </interconnect>
            </mode>
          </pb_type>
          <interconnect>
            <!-- Inputs to LUTs -->
            <direct input="alm.data_in[2:7]" name="in_lut_2_7" output="comb_block.lin[2:7]"/>
            <mux input="alm.data_in[0] dff[0].d dff[0].q" name="in_lut_0" output="comb_block.lin[0]">
            <mux input="alm.data_in[1] dff[2].d dff[2].q" name="in_lut_1" output="comb_block.lin[1]">

            <!-- Inputs to FFs -->
            <mux input="alm.data_in[0] comb_block.sumout[0]" name="in_dff_0" output="dff[0].d">
            <direct input="comb_block.combout[0]" name="in_dff_1" output="dff[1].d">
            <mux input="alm.data_in[1] comb_block.combout[0] comb_block.sumout[1]" name="in_dff_2" output="dff[2].d">
            <direct input="comb_block.combout[1]" name="in_dff_3" output="dff[3].d">

            <!-- ALM Outputs-->
            <mux input="dff[0].q dff[0].d dff[1].q dff[1].d comb_block.combout[0] comb_block.sumout[0]" name="alm_out0" output="alm.data_out[0]">
            <mux input="dff[0].q dff[0].d dff[1].q dff[1].d comb_block.combout[0] comb_block.sumout[0]" name="alm_out1" output="alm.data_out[1]">
            <mux input="dff[2].q dff[2].d dff[3].q dff[3].d comb_block.sumout[1]" name="alm_out2" output="alm.data_out[2]">
            <mux input="dff[2].q dff[2].d dff[3].q dff[3].d comb_block.sumout[1]" name="alm_out3" output="alm.data_out[3]">

            <!-- FF Clocks -->
            <direct input="alm.clock" name="clock_dff0" output="dff[0].clk"/>
            <direct input="alm.clock" name="clock_dff1" output="dff[1].clk"/>

            <!-- ALM Carry Chain -->
            <direct input="alm.cin" name="alm_cin" output="comb_block.cin">
              <pack_pattern name="LAB_carry_chain" in_port="alm.cin" out_port="comb_block.cin"/>
            </direct>
            <direct input="comb_block.cout" name="lut_to_lut_carry" output="comb_block.cin">
              <pack_pattern name="LAB_carry_chain" in_port="comb_block.cout" out_port="comb_block.cin"/>
            </direct>
            <direct input="comb_block.cout" name="alm_cout" output="alm.cout">
              <pack_pattern name="LAB_carry_chain" in_port="comb_block.cout" out_port="alm.cout"/>
            </direct>

            <!-- FF Control Signals -->

            <!--
              Here is how the alm control signals correspond to the lab wide control signals listed in Stratix 10 LAB user guide:

              synclr0 -> alm.control[0]
              labclkena0 -> alm.control[1]
              labclkena1 -> alm.control[2]
              synclr1 -> alm.control[3]
              labclr1 -> alm.control[4]
            -->
            <direct input="alm.control[4]" name="control_1_dff0" output="dff[0].clrn"/>
            <direct input="alm.control[2]" name="control_2_dff0" output="dff[0].ena"/>
            <direct input="alm.control[3]" name="control_3_dff0" output="dff[0].sclr"/>
            <direct input="alm.control[4]" name="control_1_dff1" output="dff[1].clrn"/>
            <direct input="alm.control[2]" name="control_2_dff1" output="dff[1].ena"/>
            <direct input="alm.control[3]" name="control_3_dff1" output="dff[1].sclr"/>
            <direct input="alm.control[4]" name="control_1_dff2" output="dff[2].clrn"/>
            <direct input="alm.control[1]" name="control_2_dff2" output="dff[2].ena"/>
            <direct input="alm.control[0]" name="control_3_dff2" output="dff[2].sclr"/>
            <direct input="alm.control[4]" name="control_1_dff3" output="dff[3].clrn"/>
            <direct input="alm.control[1]" name="control_2_dff3" output="dff[3].ena"/>
            <direct input="alm.control[0]" name="control_3_dff3" output="dff[3].sclr"/>
          </interconnect>
        </mode>
      </pb_type>
      <interconnect>
        <!--LAB-ALM Interconnect-->
        <!-- LAB Input: Global Routing to ALM inputs -->
        <complete input="LAB.data_in" name="LAB_datain" output="alm[9:0].data_in"/>

        <!-- ALM feedback: The ALM outputs feedback to the ALM inputs  -->
        <complete input="alm[9:0].data_out[3:0]" name="LAB_alm_feedback" output="alm[9:0].data_in"/>

        <!-- ALM Outputs: directly drive global routing -->
        <complete input="alm[9:0].data_out[3:0]" name="LAB_dataout" output="LAB.data_out"/>

        <!-- ALM Control Inputs -->
        <complete input="LAB.control_in" name="LAB_control" output="alm[9:0].control"/>

        <!-- LAB Clocks -->
        <direct input="LAB.clk" name="LAB_clock" output="alm[0].clock"/>
        <direct input="LAB.clk" name="LAB_clock" output="alm[1].clock"/>
        <direct input="LAB.clk" name="LAB_clock" output="alm[2].clock"/>
        <direct input="LAB.clk" name="LAB_clock" output="alm[3].clock"/>
        <direct input="LAB.clk" name="LAB_clock" output="alm[4].clock"/>
        <direct input="LAB.clk" name="LAB_clock" output="alm[5].clock"/>
        <direct input="LAB.clk" name="LAB_clock" output="alm[6].clock"/>
        <direct input="LAB.clk" name="LAB_clock" output="alm[7].clock"/>
        <direct input="LAB.clk" name="LAB_clock" output="alm[8].clock"/>
        <direct input="LAB.clk" name="LAB_clock" output="alm[9].clock"/>

        <!--LAB carry chain-->
        <direct input="LAB.cin" name="LAB_cin" output="alm[0].cin">
          <pack_pattern name="LAB_carry_chain" in_port="LAB.cin" out_port="alm[0].cin"/>
        </direct>
        <direct input="alm[0].cout" name="alm0_alm1_carry" output="alm[1].cin">
          <pack_pattern name="LAB_carry_chain" in_port="alm[0].cout" out_port="alm[1].cin"/>
        </direct>
        <direct input="alm[1].cout" name="alm1_alm2_carry" output="alm[2].cin">
          <pack_pattern name="LAB_carry_chain" in_port="alm[1].cout" out_port="alm[2].cin"/>
        </direct>
        <direct input="alm[2].cout" name="alm2_alm3_carry" output="alm[3].cin">
          <pack_pattern name="LAB_carry_chain" in_port="alm[2].cout" out_port="alm[3].cin"/>
        </direct>
        <direct input="alm[3].cout" name="alm3_alm4_carry" output="alm[4].cin">
          <pack_pattern name="LAB_carry_chain" in_port="alm[3].cout" out_port="alm[4].cin"/>
        </direct>
        <direct input="alm[4].cout" name="alm4_alm5_carry" output="alm[5].cin">
          <pack_pattern name="LAB_carry_chain" in_port="alm[4].cout" out_port="alm[5].cin"/>
        </direct>
        <direct input="alm[5].cout" name="alm5_alm6_carry" output="alm[6].cin">
          <pack_pattern name="LAB_carry_chain" in_port="alm[5].cout" out_port="alm[6].cin"/>
        </direct>
        <direct input="alm[6].cout" name="alm6_alm7_carry" output="alm[7].cin">
          <pack_pattern name="LAB_carry_chain" in_port="alm[6].cout" out_port="alm[7].cin"/>
        </direct>
        <direct input="alm[7].cout" name="alm7_alm8_carry" output="alm[8].cin">
          <pack_pattern name="LAB_carry_chain" in_port="alm[7].cout" out_port="alm[8].cin"/>
        </direct>
        <direct input="alm[8].cout" name="alm8_alm9_carry" output="alm[9].cin">
          <pack_pattern name="LAB_carry_chain" in_port="alm[8].cout" out_port="alm[9].cin"/>
        </direct>
        <direct input="alm[9].cout" name="LAB_cout" output="LAB.cout">
          <pack_pattern name="LAB_carry_chain" in_port="alm[9].cout" out_port="LAB.cout"/>
        </direct>

      </interconnect>
    </mode>
  </pb_type>
  </complexblocklist>
